{"version":3,"sources":["context/auth-context.js","pages/Auth.js","pages/Bookings.js","components/Backdrop/Backdrop.js","components/Model/Model.js","components/Events/EventList/EventItem/EventItem.js","components/Events/EventList/EventList.js","components/Spinner/Spinner.js","pages/Events.js","components/Navigation/MainNavigation.js","App.js","index.js"],"names":["React","createContext","token","userId","login","tokenExpiration","logout","AuthPage","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","isLogin","switchModelHandler","setState","preState","submitHandler","event","preventDefault","email","emailEl","current","value","password","passwordEl","trim","length","requestBody","query","concat","fetch","method","body","JSON","stringify","headers","Content-Type","then","res","status","Error","json","resData","console","log","data","context","catch","err","createRef","react_default","a","createElement","className","onSubmit","htmlFor","type","id","ref","onClick","Component","contextType","AuthContext","BookingsPage","backdrop","model","title","children","canCancel","onCancel","canConfirm","onConfirm","confirmText","eventItem","key","eventId","price","Date","date","toLocaleDateString","creatorId","onDetail","bind","eventList","events","map","EventItem_EventItem","_id","authuserId","creator","onViewDetail","spinner","EventsPage","creating","isLoading","selectedEvent","startCreateEventHandler","modelConfirmHandler","titleElRef","priceElRef","dateElRef","description","descriptionElRef","Authorization","prevState","updateEvents","toConsumableArray","push","createEvent","modelCancelHandler","showDetailHandler","find","e","bookEventhandler","fetchEvents","_this2","Fragment","Backdrop_Backdrop","Model_Model","rows","Spinner_Spinner","EventList_EventList","mainNavigation","auth_context","Consumer","NavLink","to","App","BrowserRouter","Provider","Navigation_MainNavigation","Switch","Redirect","from","exact","Route","path","component","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.fad49948.chunk.js","sourcesContent":["import React from \"react\";\n\nexport default React.createContext({\n  token: null,\n  userId: null,\n  login: (token, userId, tokenExpiration) => {},\n  logout: () => {}\n});\n","import React, { Component } from \"react\";\n\nimport \"./Auth.css\";\nimport AuthContext from \"../context/auth-context\";\n\nclass AuthPage extends Component {\n  state = {\n    isLogin: true\n  };\n\n  static contextType = AuthContext;\n\n  constructor(props) {\n    super(props);\n    this.emailEl = React.createRef();\n    this.passwordEl = React.createRef();\n  }\n\n  switchModelHandler = () => {\n    this.setState(preState => {\n      return {\n        isLogin: !preState.isLogin\n      };\n    });\n  };\n\n  submitHandler = event => {\n    event.preventDefault();\n    const email = this.emailEl.current.value;\n    const password = this.passwordEl.current.value;\n\n    if (email.trim().length === 0 || password.trim().length === 0) {\n      return;\n    }\n\n    let requestBody = {\n      query: `\n        query {\n          login(email: \"${email}\", password: \"${password}\") {\n            userId\n            token\n            tokenExpiration\n          }\n        }\n      `\n    };\n\n    if (!this.state.isLogin) {\n      requestBody = {\n        query: `\n          mutation {\n            createUser(userInput: {email: \"${email}\", password: \"${password}\"}) {\n              _id\n              email\n            }\n          }\n        `\n      };\n    }\n\n    fetch(\"http://localhost:8000/graphql\", {\n      method: \"POST\",\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Failed\");\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        if (resData.data.login.token) {\n          this.context.login(\n            resData.data.login.token,\n            resData.data.login.userId,\n            resData.data.login.tokenExpiration\n          );\n        }\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  render() {\n    return (\n      <form className=\"auth-form\" onSubmit={this.submitHandler}>\n        <div className=\"form-control\">\n          <label htmlFor=\"email\">E-Mail</label>\n          <input type=\"email\" id=\"email\" ref={this.emailEl} />\n        </div>\n        <div className=\"form-control\">\n          <label htmlFor=\"password\">Password</label>\n          <input type=\"password\" id=\"password\" ref={this.passwordEl} />\n        </div>\n        <div className=\"form-actions\">\n          <button type=\"submit\">Submit</button>\n          <button type=\"button\" onClick={this.switchModelHandler}>\n            Switch to {this.state.isLogin ? \"Signup\" : \"Login\"}\n          </button>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default AuthPage;\n","import React, { Component } from \"react\";\n\nclass BookingsPage extends Component {\n  render() {\n    return <h1>The Bookings Page</h1>;\n  }\n}\n\nexport default BookingsPage;\n","import React from \"react\";\nimport \"./Backdrop.css\";\n\nconst backdrop = props => <div className=\"backdrop\" />;\n\nexport default backdrop;\n","import React from \"react\";\n\nimport \"./Model.css\";\n\nconst model = props => (\n  <div className=\"model\">\n    <header className=\"model__header\">\n      <h1>{props.title}</h1>\n    </header>\n    <section className=\"model__content\">{props.children}</section>\n    <section className=\"model__actions\">\n      {props.canCancel && (\n        <button className=\"btn\" onClick={props.onCancel}>\n          Cancel\n        </button>\n      )}\n      {props.canConfirm && (\n        <button className=\"btn\" onClick={props.onConfirm}>\n          {props.confirmText}\n        </button>\n      )}\n    </section>\n  </div>\n);\n\nexport default model;\n","import React from \"react\";\n\nimport \"./EventItem.css\";\n\nconst eventItem = props => (\n  <li key={props.eventId} className=\"events__list-item\">\n    <div>\n      <h1>{props.title}</h1>\n      <h2>\n        ${props.price} - {new Date(props.date).toLocaleDateString()}\n      </h2>\n    </div>\n    <div>\n      {props.userId === props.creatorId ? (\n        <p>Your the owner of this event.</p>\n      ) : (\n        <button className=\"btn\" onClick={props.onDetail.bind(this, props.eventId)}>\n          View Details\n        </button>\n      )}\n    </div>\n  </li>\n);\n\nexport default eventItem;\n","import React from \"react\";\n\nimport EventItem from \"./EventItem/EventItem\";\nimport \"./EventList.css\";\n\nconst eventList = props => {\n  const events = props.events.map(event => {\n    return (\n      <EventItem\n        key={event._id}\n        eventId={event._id}\n        title={event.title}\n        price={event.price}\n        date={event.date}\n        userId={props.authuserId}\n        creatorId={event.creator._id}\n        onDetail={props.onViewDetail}\n      />\n    );\n  });\n\n  return <ul className=\"event__list\">{events}</ul>;\n};\n\nexport default eventList;\n","import React from \"react\";\n\nimport \"./Spinner.css\";\n\nconst spinner = () => (\n  <div className=\"spinner\">\n    <div className=\"lds-dual-ring\" />\n  </div>\n);\n\nexport default spinner;\n","import React, { Component } from \"react\";\n\nimport Backdrop from \"../components/Backdrop/Backdrop\";\nimport Model from \"../components/Model/Model\";\nimport EventList from \"../components/Events/EventList/EventList\";\nimport Spinner from \"../components/Spinner/Spinner\";\nimport AuthContext from \"../context/auth-context\";\nimport \"./Events.css\";\n\nclass EventsPage extends Component {\n  state = {\n    creating: false,\n    events: [],\n    isLoading: false,\n    selectedEvent: null\n  };\n\n  static contextType = AuthContext;\n\n  constructor(props) {\n    super(props);\n    this.titleElRef = React.createRef();\n    this.priceElRef = React.createRef();\n    this.dateElRef = React.createRef();\n    this.descriptionElRef = React.createRef();\n  }\n\n  componentDidMount() {\n    this.fetchEvents();\n  }\n\n  startCreateEventHandler = () => {\n    this.setState({ creating: true });\n  };\n\n  modelConfirmHandler = () => {\n    this.setState({ creating: false });\n    const title = this.titleElRef.current.value;\n    const price = +this.priceElRef.current.value;\n    const date = this.dateElRef.current.value;\n    const description = this.descriptionElRef.current.value;\n\n    if (\n      title.trim().length === 0 ||\n      price <= 0 ||\n      date.trim().length === 0 ||\n      description.trim().length === 0\n    ) {\n      return;\n    }\n\n    const event = { title, price, date, description };\n    console.log(event);\n\n    const requestBody = {\n      query: `\n        mutation {\n          createEvent(eventInput: {title: \"${title}\", description: \"${description}\", price: ${price}, date: \"${date}\"}) {\n            _id\n            title\n            description\n            date\n            price\n          }\n        }\n      `\n    };\n\n    const token = this.context.token;\n\n    fetch(\"http://localhost:8000/graphql\", {\n      method: \"POST\",\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Failed\");\n        }\n        return res.json();\n      })\n      .then(resData => {\n        // this.fetchEvents();\n        this.setState(prevState => {\n          const updateEvents = [...prevState.events];\n          updateEvents.push({\n            _id: resData.data.createEvent._id,\n            title: resData.data.createEvent.title,\n            description: resData.data.createEvent.description,\n            date: resData.data.createEvent.date,\n            price: resData.data.createEvent.price,\n            creator: {\n              _id: this.context.userId\n            }\n          });\n\n          return { events: updateEvents };\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  modelCancelHandler = () => {\n    this.setState({ creating: false, selectedEvent: null });\n  };\n\n  fetchEvents() {\n    this.setState({ isLoading: true });\n    const requestBody = {\n      query: `\n        query {\n          events {\n            _id\n            title\n            description\n            date\n            price\n            creator {\n              _id\n              email\n            }\n          }\n        }\n      `\n    };\n\n    fetch(\"http://localhost:8000/graphql\", {\n      method: \"POST\",\n      body: JSON.stringify(requestBody),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Failed\");\n        }\n        return res.json();\n      })\n      .then(resData => {\n        const events = resData.data.events;\n        this.setState({ events: events, isLoading: false });\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ isLoading: false });\n      });\n  }\n\n  showDetailHandler = eventId => {\n    this.setState(prevState => {\n      const selectedEvent = prevState.events.find(e => e._id === eventId);\n      return { selectedEvent: selectedEvent };\n    });\n  };\n\n  bookEventhandler = () => {};\n\n  render() {\n    return (\n      <React.Fragment>\n        {(this.state.creating || this.state.selectedEvent) && <Backdrop />}\n        {this.state.creating && (\n          <Model\n            title=\"Add Event\"\n            canCancel\n            canConfirm\n            onCancel={this.modelCancelHandler}\n            onConfirm={this.modelConfirmHandler}\n            confirmText=\"Confirm\"\n          >\n            <form>\n              <div className=\"form-control\">\n                <label htmlFor=\"title\">Title</label>\n                <input type=\"text\" id=\"title\" ref={this.titleElRef} />\n              </div>\n              <div className=\"form-control\">\n                <label htmlFor=\"price\">Price</label>\n                <input type=\"number\" id=\"price\" ref={this.priceElRef} />\n              </div>\n              <div className=\"form-control\">\n                <label htmlFor=\"date\">Date</label>\n                <input type=\"datetime-local\" id=\"date\" ref={this.dateElRef} />\n              </div>\n              <div className=\"form-control\">\n                <label htmlFor=\"description\">Description</label>\n                <textarea\n                  id=\"description\"\n                  rows=\"4\"\n                  ref={this.descriptionElRef}\n                />\n              </div>\n            </form>\n          </Model>\n        )}\n        {this.state.selectedEvent && (\n          <Model\n            title={this.state.selectedEvent.title}\n            canCancel\n            canConfirm\n            onCancel={this.modelCancelHandler}\n            onConfirm={this.bookEventhandler}\n            confirmText=\"Book\"\n          >\n            <h1>{this.state.selectedEvent.title}</h1>\n            <h2>\n              ${this.state.selectedEvent.price} -{\" \"}\n              {new Date(this.state.selectedEvent.date).toLocaleDateString()}\n            </h2>\n            <p>{this.state.selectedEvent.description}</p>\n          </Model>\n        )}\n\n        {this.context.token && (\n          <div className=\"events-control\">\n            <p>Share your own Events!</p>\n            <button className=\"btn\" onClick={this.startCreateEventHandler}>\n              Create Event\n            </button>\n          </div>\n        )}\n        {this.state.isLoading ? (\n          <Spinner />\n        ) : (\n          <EventList\n            events={this.state.events}\n            authuserId={this.context.userId}\n            onViewDetail={this.showDetailHandler}\n          />\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nexport default EventsPage;\n","import React from \"react\";\nimport { NavLink } from \"react-router-dom\";\n\nimport AuthContext from \"../../context/auth-context\";\nimport \"./MainNavigation.css\";\n\nconst mainNavigation = props => (\n  <AuthContext.Consumer>\n    {context => {\n      return (\n        <header className=\"main-navigation\">\n          <div className=\"main-navigation__logo\">\n            <h1>EasyEvent</h1>\n          </div>\n          <nav className=\"main-navigation__items\">\n            <ul>\n              {!context.token && (\n                <li>\n                  <NavLink to=\"/auth\">Authenticate</NavLink>\n                </li>\n              )}\n              <li>\n                <NavLink to=\"/events\">Events</NavLink>\n              </li>\n              {context.token && (\n                <React.Fragment>\n                  <li>\n                    <NavLink to=\"/bookings\">Bookings</NavLink>\n                  </li>\n                  <li>\n                    <button onClick={context.logout}>Logout</button>\n                  </li>\n                </React.Fragment>\n              )}\n            </ul>\n          </nav>\n        </header>\n      );\n    }}\n  </AuthContext.Consumer>\n);\n\nexport default mainNavigation;\n","import React, { Component } from \"react\";\nimport { BrowserRouter, Route, Redirect, Switch } from \"react-router-dom\";\n\nimport AuthPage from \"./pages/Auth\";\nimport BookingsPage from \"./pages/Bookings\";\nimport EventsPage from \"./pages/Events\";\nimport MainNavigation from \"./components/Navigation/MainNavigation\";\nimport AuthContext from \"./context/auth-context\";\n\nimport \"./App.css\";\n\nclass App extends Component {\n  state = {\n    token: null,\n    userId: null\n  };\n\n  login = (token, userId, tokenExpiration) => {\n    this.setState({ token: token, userId: userId });\n  };\n\n  logout = () => {\n    this.setState({ token: null, userId: null });\n  };\n\n  render() {\n    return (\n      <BrowserRouter>\n        <React.Fragment>\n          <AuthContext.Provider\n            value={{\n              token: this.state.token,\n              userId: this.state.userId,\n              login: this.login,\n              logout: this.logout\n            }}\n          >\n            <MainNavigation />\n            <main className=\"main-content\">\n              <Switch>\n                {this.state.token && <Redirect from=\"/\" to=\"/events\" exact />}\n                {this.state.token && (\n                  <Redirect from=\"/auth\" to=\"/events\" exact />\n                )}\n                {!this.state.token && (\n                  <Route path=\"/auth\" component={AuthPage} />\n                )}\n                <Route path=\"/events\" component={EventsPage} />\n                {this.state.token && (\n                  <Route path=\"/bookings\" component={BookingsPage} />\n                )}\n                {!this.state.token && <Redirect to=\"/auth\" exact />}\n              </Switch>\n            </main>\n          </AuthContext.Provider>\n        </React.Fragment>\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}